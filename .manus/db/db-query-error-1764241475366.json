{
  "query": "-- Enable UUID extension\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Create lesson_sessions table\nCREATE TABLE IF NOT EXISTS lesson_sessions (\n    id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n    user_id VARCHAR NOT NULL, \n    lesson_id VARCHAR NOT NULL,\n    word_order_ids TEXT[] NOT NULL,\n    current_index INTEGER DEFAULT 0,\n    is_randomized BOOLEAN DEFAULT FALSE,\n    status VARCHAR(20) DEFAULT 'IN_PROGRESS',\n    words_completed INTEGER DEFAULT 0,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX IF NOT EXISTS idx_sessions_user_lesson ON lesson_sessions(user_id, lesson_id, status);\n\n-- Create lesson_word_attempts table\nCREATE TABLE IF NOT EXISTS lesson_word_attempts (\n    id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n    lesson_session_id VARCHAR REFERENCES lesson_sessions(id) ON DELETE CASCADE,\n    word_id VARCHAR NOT NULL,\n    attempt_number INTEGER DEFAULT 1,\n    transcription TEXT,\n    pronunciation_score INTEGER,\n    ai_feedback TEXT,\n    audio_url TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX IF NOT EXISTS idx_word_attempts_word_score ON lesson_word_attempts(word_id, pronunciation_score);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3znUVPnpg7c3YZC.8155b2cf6016 --database GMrrqid3mD3bEcKcU2S8Qr --execute -- Enable UUID extension\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Create lesson_sessions table\nCREATE TABLE IF NOT EXISTS lesson_sessions (\n    id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n    user_id VARCHAR NOT NULL, \n    lesson_id VARCHAR NOT NULL,\n    word_order_ids TEXT[] NOT NULL,\n    current_index INTEGER DEFAULT 0,\n    is_randomized BOOLEAN DEFAULT FALSE,\n    status VARCHAR(20) DEFAULT 'IN_PROGRESS',\n    words_completed INTEGER DEFAULT 0,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX IF NOT EXISTS idx_sessions_user_lesson ON lesson_sessions(user_id, lesson_id, status);\n\n-- Create lesson_word_attempts table\nCREATE TABLE IF NOT EXISTS lesson_word_attempts (\n    id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n    lesson_session_id VARCHAR REFERENCES lesson_sessions(id) ON DELETE CASCADE,\n    word_id VARCHAR NOT NULL,\n    attempt_number INTEGER DEFAULT 1,\n    transcription TEXT,\n    pronunciation_score INTEGER,\n    ai_feedback TEXT,\n    audio_url TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX IF NOT EXISTS idx_word_attempts_word_score ON lesson_word_attempts(word_id, pronunciation_score);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 2: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 1 column 16 near \"EXTENSION IF NOT EXISTS \"uuid-ossp\"\""
  ]
}